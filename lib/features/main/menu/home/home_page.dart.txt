import 'package:dhakalive/screens/auth/registration/login_page.dart';
import 'package:dhakalive/screens/auth/registration/otp_page.dart';
import 'package:dhakalive/screens/chennal_video_page.dart';
import 'package:dhakalive/screens/category_details_page.dart';
import 'package:dhakalive/screens/main/menu/home/home_page_controller.dart';
import 'package:dhakalive/screens/main/menu/liveTv/live_tv_page.dart';
import 'package:dhakalive/screens/series_page.dart';
import 'package:dhakalive/utils/hexcolor.dart';
import 'package:dhakalive/utils/palette.dart';
import 'package:dhakalive/widgets/channel_item.dart';
import 'package:dhakalive/widgets/video_item.dart';
import 'package:dhakalive/widgets/live_item_card.dart';
import 'package:dhakalive/widgets/news.dart';
import 'package:dhakalive/widgets/section_divider.dart';
import 'package:flutter/material.dart';
import 'package:get/get.dart';

class HomePage extends StatelessWidget {
  HomePage({Key? key}) : super(key: key);

  final controller = Get.put(HomePageController());

  Future<void> onRefresh() async {}

  @override
  Widget build(BuildContext context) {
    final textTheme = Theme.of(context)
        .textTheme
        .apply(displayColor: Theme.of(context).colorScheme.onSurface);

    return Scaffold(
      body: controller.obx((state) {
        return RefreshIndicator(
            child: SingleChildScrollView(
              child: Column(
                children: <Widget>[
                  Stack(
                    children: <Widget>[
                      Image.network(
                        "https://unsplash.com/photos/ZhQCZjr9fHo/download?ixid=MnwxMjA3fDB8MXxhbGx8fHx8fHx8fHwxNjU1Mjc3Mzcw&force=true&w=640",
                        height: 220,
                        width: double.infinity,
                        fit: BoxFit.cover,
                      ),
                      Positioned.fill(
                        child: Align(
                          alignment: Alignment.bottomCenter,
                          child: Container(
                            width: double.infinity,
                            height: 160,
                            decoration: BoxDecoration(
                              gradient: LinearGradient(
                                  begin: Alignment.bottomCenter,
                                  end: Alignment.topCenter,
                                  colors: [
                                    Palette.backgroundColor,
                                    Colors.black.withOpacity(0.8),
                                    Colors.black.withOpacity(0.05),
                                  ]),
                            ),
                            child: Padding(
                              padding: const EdgeInsets.all(8),
                              child: Column(
                                crossAxisAlignment: CrossAxisAlignment.start,
                                mainAxisAlignment: MainAxisAlignment.end,
                                children: <Widget>[
                                  Text(
                                    "Golden jubilee Concert Live",
                                    style: textTheme.titleLarge!,
                                  ),
                                  Text(
                                    "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Risus pellentesque ut in arcu nunc suspendisse amet",
                                    style: textTheme.caption!,
                                  ),
                                  const SizedBox(
                                    height: 8,
                                  ),
                                  Row(
                                    mainAxisAlignment:
                                        MainAxisAlignment.spaceBetween,
                                    children: <Widget>[
                                      Text(
                                        "Live Start on 03:00 PM",
                                        style: textTheme.labelLarge!.copyWith(
                                            color: HexColor("#FFDACF")),
                                      ),
                                      Text(
                                        "02 : 10 : 25",
                                        style: textTheme.labelLarge!.copyWith(
                                            color: HexColor("#FFDACF")),
                                      ),
                                    ],
                                  ),
                                  const SizedBox(
                                    height: 16,
                                  )
                                ],
                              ),
                            ),
                          ),
                        ),
                      )
                    ],
                  ),
                  SectionDivider(
                    title: "Dhakalive Originals",
                    onClick: () {
                      Get.to(SeriesPage());
                    },
                  ),
                  const SizedBox(
                    height: 8,
                  ),
                  SizedBox(
                    height: 130,
                    child: ListView.builder(
                        scrollDirection: Axis.horizontal,
                        itemBuilder: (context, index) {
                          final item = state!.dhakaliveOriginals[index];
                          return VideoItem(
                            width: 200,
                            height: 130,
                            title: item.title,
                            subtitle: item.description,
                            imgUrl: item.cover,
                            onClick: () {},
                          );
                        },
                        itemCount: state!.dhakaliveOriginals.length),
                  ),
                  const SizedBox(
                    height: 16,
                  ),
                  SectionDivider(
                    title: "Channels",
                    onClick: () {
                      Get.to(ChennalVideoPage());
                    },
                  ),
                  const SizedBox(
                    height: 8,
                  ),
                  SizedBox(
                    height: 200,
                    child: ListView.builder(
                        scrollDirection: Axis.horizontal,
                        itemBuilder: (context, index) {
                          final item = state.channels[index];
                          return ChannelItem(
                            height: 200,
                            width: 130,
                            title: item.name,
                            cover: item.cover,
                            thumbnail: item.thumbnail,
                            isVerified: item.isVerified ?? false,
                            onClick: () {
                              debugPrint("Click");
                            },
                          );
                        },
                        itemCount: state.channels.length),
                  ),
                  const SizedBox(
                    height: 8,
                  ),
                  SectionDivider(
                    title: "Drama Series",
                    onClick: () {},
                  ),
                  const SizedBox(
                    height: 8,
                  ),
                  SizedBox(
                    height: 130,
                    child: ListView.builder(
                        scrollDirection: Axis.horizontal,
                        itemBuilder: (context, index) {
                          final item = state.dramaSeries[index];
                          return VideoItem(
                            width: 200,
                            height: 130,
                            title: item.title,
                            subtitle: item.description,
                            imgUrl: item.cover,
                            onClick: () {},
                          );
                        },
                        itemCount: state.dramaSeries.length),
                  ),
                  const SizedBox(
                    height: 8,
                  ),
                  SectionDivider(
                    title: "Motivational",
                    onClick: () {},
                  ),
                  const SizedBox(
                    height: 8,
                  ),
                  SizedBox(
                    height: 130,
                    child: ListView.builder(
                        scrollDirection: Axis.horizontal,
                        itemBuilder: (context, index) {
                          final item = state.motivations[index];
                          return VideoItem(
                            width: 200,
                            height: 130,
                            title: item.title,
                            subtitle: item.description,
                            imgUrl: item.cover,
                            onClick: () {},
                          );
                        },
                        itemCount: state.motivations.length),
                  ),
                  const SizedBox(
                    height: 8,
                  ),
                  SectionDivider(
                    title: "Documentaries",
                    onClick: () {},
                  ),
                  const SizedBox(
                    height: 8,
                  ),
                  SizedBox(
                    height: 130,
                    child: ListView.builder(
                        scrollDirection: Axis.horizontal,
                        itemBuilder: (context, index) {
                          final item = state.documents[index];
                          return VideoItem(
                            width: 200,
                            height: 130,
                            title: item.title,
                            subtitle: item.description,
                            imgUrl: item.cover,
                            onClick: () {},
                          );
                        },
                        itemCount: state.documents.length),
                  ),
                  const SizedBox(
                    height: 8,
                  ),
                  SectionDivider(
                    title: "Self Learning",
                    onClick: () {},
                  ),
                  const SizedBox(
                    height: 8,
                  ),
                  SizedBox(
                    height: 130,
                    child: ListView.builder(
                        scrollDirection: Axis.horizontal,
                        itemBuilder: (context, index) {
                          final item = state.selfLearnings[index];
                          return VideoItem(
                            width: 200,
                            height: 130,
                            title: item.title,
                            subtitle: item.description,
                            imgUrl: item.cover,
                            onClick: () {},
                          );
                        },
                        itemCount: state.selfLearnings.length),
                  ),
                  const SizedBox(
                    height: 32,
                  ),
                ],
              ),
            ),
            onRefresh: onRefresh);
      }),
    );
    // return Scaffold(
    //     body: SingleChildScrollView(
    //   child: Padding(
    //     padding: const EdgeInsets.all(4.0),
    //     child: Column(children: [
    //       LiveItemCard(
    //         islive: true,
    //         title: "Golden jubilee Concert Live",
    //         subtitle:
    //             "One of the showpiece events for the platinum jubilee is a concert with Queen, Diana Ross, Elton John and more ",
    //       ),
    //       const SizedBox(
    //         height: 4,
    //       ),
    //       Row(
    //         mainAxisSize: MainAxisSize.max,
    //         children: [
    //           Padding(
    //             padding: const EdgeInsets.all(8.0),
    //             child: ElevatedButton(
    //                 style: ButtonStyle(
    //                     maximumSize: MaterialStateProperty.all(Size.infinite),
    //                     backgroundColor: MaterialStateProperty.all(
    //                         const Color.fromARGB(255, 238, 58, 8))),
    //                 onPressed: () {},
    //                 child: const Padding(
    //                   padding: EdgeInsets.all(8.0),
    //                   child: Text(
    //                     'Watch Live',
    //                     style: TextStyle(
    //                         fontWeight: FontWeight.w500,
    //                         color: Colors.white,
    //                         fontSize: 15),
    //                   ),
    //                 )),
    //           ),
    //           Padding(
    //             padding: const EdgeInsets.all(8.0),
    //             child: MaterialButton(
    //                 onPressed: () {},
    //                 child: Row(
    //                   children: const [
    //                     Icon(
    //                       Icons.playlist_add,
    //                       color: Colors.grey,
    //                     ),
    //                     SizedBox(
    //                       width: 5,
    //                     ),
    //                     Text(
    //                       'Add to List',
    //                       style: TextStyle(
    //                           fontWeight: FontWeight.w400,
    //                           color: Colors.grey,
    //                           fontSize: 15),
    //                     ),
    //                   ],
    //                 )),
    //           ),
    //         ],
    //       ),
    //       SectionDivider(
    //         title: "Dhakalive Originals",
    //         onClick: () {
    //           Get.to(() => ChennalVideoPage());
    //           print("ok");
    //         },
    //       ),
    //       SizedBox(
    //         height: h * .30,
    //         child: ListView.builder(
    //             scrollDirection: Axis.horizontal,
    //             shrinkWrap: true,
    //             itemBuilder: (context, index) => ItemCard(
    //                   width: 280,
    //                   title: "Golden jubilee Concert Live",
    //                 ),
    //             itemCount: 5),
    //       ),
    //       SectionDivider(
    //         title: "Chanel",
    //         onClick: () {
    //           Get.to(() => LiveTvPage());
    //           print("ok");
    //         },
    //       ),
    //       Container(
    //         height: h * .30,
    //         child: ListView.builder(
    //             scrollDirection: Axis.horizontal,
    //             shrinkWrap: true,
    //             itemBuilder: (context, index) => ItemCard(
    //                   width: 150,
    //                   img: "assets/chanel.png",
    //                 ),
    //             itemCount: 5),
    //       ),
    //       SectionDivider(
    //         title: "Live TV",
    //         onClick: () {
    //           Get.to(() => CategoryDetailsPage());
    //           print("ok");
    //         },
    //       ),
    //       SizedBox(
    //         height: h * .15,
    //         child: ListView.builder(
    //             scrollDirection: Axis.horizontal,
    //             shrinkWrap: true,
    //             itemBuilder: (context, index) => ItemCard(
    //                   onClick: () {
    //                     if (index == 1) {
    //                       Get.to(() => LiveTVDetailsPage());
    //                       print("ok");
    //                     }
    //
    //                     if (index == 2) {
    //                       Get.to(() => OTPPage());
    //                       print("ok");
    //                     }
    //
    //                     if (index == 3) {
    //                       Get.to(() => LoginPage());
    //                       print("ok");
    //                     }
    //                   },
    //                   img: "assets/tv1.png",
    //                 ),
    //             itemCount: 5),
    //       ),
    //       SectionDivider(
    //         title: "Drama Series",
    //         onClick: () {
    //           Get.to(() => CategoryDetailsPage());
    //         },
    //       ),
    //       Container(
    //         height: h * .30,
    //         child: ListView.builder(
    //             scrollDirection: Axis.horizontal,
    //             shrinkWrap: true,
    //             itemBuilder: (context, index) => ItemCard(
    //                   width: 280,
    //                   img: "assets/drama.png",
    //                   title: "Golden jubilee Concert Live",
    //                 ),
    //             itemCount: 5),
    //       ),
    //       SectionDivider(
    //         title: "Motivitional",
    //         onClick: () {},
    //       ),
    //       Container(
    //         height: h * .30,
    //         child: ListView.builder(
    //             scrollDirection: Axis.horizontal,
    //             shrinkWrap: true,
    //             itemBuilder: (context, index) => ItemCard(
    //                   img: "assets/motiv2.png",
    //                 ),
    //             itemCount: 5),
    //       ),
    //       SectionDivider(
    //         title: "Documentaries",
    //         onClick: () {},
    //       ),
    //       Container(
    //         height: h * .30,
    //         child: ListView.builder(
    //             scrollDirection: Axis.horizontal,
    //             shrinkWrap: true,
    //             itemBuilder: (context, index) => ItemCard(
    //                   title: "Golden jubilee Concert Live",
    //                   width: 280,
    //                   img: 'assets/documentory.png',
    //                 ),
    //             itemCount: 5),
    //       ),
    //       SectionDivider(
    //         title: "Self Learning",
    //         onClick: () {},
    //       ),
    //       Container(
    //         height: h * .30,
    //         child: ListView.builder(
    //             scrollDirection: Axis.horizontal,
    //             shrinkWrap: true,
    //             itemBuilder: (context, index) => ItemCard(
    //                   img: 'assets/self.png',
    //                   width: 280,
    //                 ),
    //             itemCount: 5),
    //       ),
    //       SectionDivider(
    //         title: "Events",
    //         onClick: () {},
    //       ),
    //       Container(
    //         height: h * .30,
    //         child: ListView.builder(
    //             scrollDirection: Axis.horizontal,
    //             shrinkWrap: true,
    //             itemBuilder: (context, index) => ItemCard(
    //                   img: 'assets/event.png',
    //                   width: 280,
    //                 ),
    //             itemCount: 5),
    //       ),
    //       SectionDivider(
    //         title: "DhakaLive Broadscast",
    //         onClick: () {},
    //       ),
    //       Container(
    //         height: h * .30,
    //         child: ListView.builder(
    //             scrollDirection: Axis.horizontal,
    //             shrinkWrap: true,
    //             itemBuilder: (context, index) => ItemCard(
    //                   img: 'assets/dhakalive.png',
    //                   width: 280,
    //                 ),
    //             itemCount: 5),
    //       ),
    //       Row(
    //         mainAxisSize: MainAxisSize.max,
    //         children: [
    //           Padding(
    //             padding: const EdgeInsets.all(8.0),
    //             child: ElevatedButton(
    //                 style: ButtonStyle(
    //                     maximumSize: MaterialStateProperty.all(Size.infinite),
    //                     backgroundColor: MaterialStateProperty.all(
    //                         const Color.fromARGB(255, 238, 58, 8))),
    //                 onPressed: () {},
    //                 child: const Padding(
    //                   padding: EdgeInsets.all(8.0),
    //                   child: Text(
    //                     'Watch Live',
    //                     style: TextStyle(
    //                         fontWeight: FontWeight.w500,
    //                         color: Colors.white,
    //                         fontSize: 15),
    //                   ),
    //                 )),
    //           ),
    //           Padding(
    //             padding: const EdgeInsets.all(8.0),
    //             child: MaterialButton(
    //                 onPressed: () {},
    //                 child: Row(
    //                   children: const [
    //                     Icon(
    //                       Icons.playlist_add,
    //                       color: Colors.grey,
    //                     ),
    //                     SizedBox(
    //                       width: 5,
    //                     ),
    //                     Text(
    //                       'Add to List',
    //                       style: TextStyle(
    //                           fontWeight: FontWeight.w400,
    //                           color: Colors.grey,
    //                           fontSize: 15),
    //                     ),
    //                   ],
    //                 )),
    //           ),
    //         ],
    //       ),
    //       SectionDivider(
    //         title: "News",
    //         onClick: () {},
    //       ),
    //       Container(
    //         child: ListView.builder(
    //             physics: NeverScrollableScrollPhysics(),
    //             shrinkWrap: true,
    //             itemBuilder: (context, index) => NewsCard(
    //                   onPress: null,
    //                 ),
    //             itemCount: 5),
    //       ),
    //       const SizedBox(
    //         height: 50,
    //       ),
    //     ]),
    //   ),
    // ));
  }
}
Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: <Widget>[
          AspectRatio(
            aspectRatio: 16 / 9,
            child: Stack(
              children: <Widget>[
                BetterPlayer.network(
                  "https://videodelivery.net/5d6bec3f7a9b34ad4e1ae19696e23e4b/manifest/video.m3u8",
                ),
                Positioned.fill(
                  child: Align(
                    alignment: Alignment.topLeft,
                    child: Padding(
                      padding: const EdgeInsets.only(top: 0),
                      child: IconButton(
                        icon: const Icon(
                          Icons.arrow_back,
                          color: Colors.white,
                        ),
                        onPressed: () {
                          Get.back();
                        },
                      ),
                    ),
                  ) ,
                )
              ],
            ),
          ),
          Expanded(child: SingleChildScrollView(
            child: Padding(
              padding: EdgeInsets.symmetric(horizontal: 8),
              child: Column(
                children: <Widget>[
                  SizedBox(
                    height: 16,
                  ),
                  Text("Breakup with Febu", style: textTheme.titleLarge,)
                ],
              ),
            ),
          ))
        ],
      )